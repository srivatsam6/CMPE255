<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Forest Covertype Mining</title>

    <link href="css/simple-sidebar.css" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"/>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-route.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.js"></script>

    <link rel="shortcut icon" href="">

</head>


<body ng-app="forestCovertype">
    <nav class="navbar navbar-inverse">
    <div class="container-fluid">

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/"> <span class="glyphicon glyphicon-log-out" aria-hidden="true">&nbsp;</span>
                    Signout</a></li> 
            </ul>
        </div>
       
    </div>
    
    </nav> 

    <div id="wrapper" class="toggled">     
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#home">
                        Forest Covertype
                    </a>
                </li>
                <li>
                    <a href="#fileUpload">File Upload</a>
                </li>
                
                <li>
                    <a href="#featureModelSelection"> Feature Model Selection</a>
                </li>
               
                <li>
                    <a href="#resultsGraphs">Results and Graphs</a>
                </li>
               
            </ul>
        </div>
        

        <div id="page-content-wrapper">
            <div class="container-fluid">
                
            </div>

            <div ng-view=""></div>
        </div>
        

    </div>
   

<script>
    var forestCovertype = angular.module("forestCovertype", ['ngRoute','ui']);/* ["checklist-model"] ,'checklist-model'*/
    forestCovertype.config(function ($routeProvider) 
    {

        $routeProvider.when("/home", {
            templateUrl: "../angular/home.html"
        }).when("/fileUpload", {
            templateUrl: "../angular/fileUpload.html"
        }).when("/featureModelSelection", {
            templateUrl: "../angular/featureModelSelection.html"
        }).when("/results", {
            templateUrl: "../angular/displayResults.html"
        }).otherwise({
            templateUrl: "../angular/graphs.html"
        });
    });

    

    forestCovertype.controller("homeCtrl", function ($scope, $http) 
    {

    });

   
    

    forestCovertype.controller('fileUploadCtrl', function ($scope, $http) {

        $scope.myFunc = function(file, uploadUrl)
        {

            var fd = new FormData();
            fd.append('file', file);
            $http.post(uploadUrl, fd, {
                //alert("Hello");
                transformRequest: angular.identity,
                headers: {'Content-Type': undefined}
            })
            .success(function(){
              console.log("success");
              window.location.href = "#featureModelSelection";
            })
            .error(function(){
              console.log("failure");
            });

        }   
    });

    forestCovertype.controller("resultsCtrl", function ($scope, $http)
    {

    });

    forestCovertype.controller("graphsCtrl", function ($scope, $http)
    {

    });
    forestCovertype.controller("featureModelSelectionCtrl", function ($scope, $http)
    {

        $scope.getFeatures = function() {
            $http({
              method: "GET",
              url: 'http://localhost:5000/features'

          }).then(function(response) {
                      // success
                      console.log(response.data);
                      //$scope.features = [];
                      $scope.features = response.data;
                      /*console.log(features);*/
                      console.log("success");
              }, 
              function(error) { // optional
                      // failed
                      console.log("failed");
              });

          }

          /*$scope.selected = {
            features: ['selected']
          };
          $scope.checkAll = function() {
            $scope.selected.features = angular.copy($scope.features);
          };
          $scope.uncheckAll = function() {
            $scope.selected.features = [];
          };
          console.log($scope.selected);*/

          /*$scope.selected = {};
          $scope.ShowSelected = function() {
            $scope.features = $.grep($scope.features, function( feature ) {
              return $scope.selected[ feature ];
            });
          };  */
          $scope.selected = {};
          $scope.ShowSelected = function() {
            console.log($scope.selected);
            alert(JSON.stringify($scope.selected));
          };

          $scope.selected1 = {};
          $scope.title ={};
          $scope.title1 = {}
          $scope.ShowSelected1 = function() {
            console.log($scope.selected1);
            alert(JSON.stringify($scope.selected1));
          };
          $scope.title1 = document.getElementById("modelValue1").value;
          $scope.title = document.getElementById("modelValue").value;

          /*$scope.selection = [];

          // Toggle selection for a given fruit by name
          $scope.toggleSelection = function toggleSelection(feature) {
            var idx = $scope.selection.indexOf(feature);

            // Is currently selected
            if (idx > -1) {
              $scope.selection.splice(idx, 1);
            }

            // Is newly selected
            else {
              $scope.selection.push(feature);
            }
          };
          console.log($scope.selection);*/

          $scope.updateFeatures = function() {
            $http({
              method: "POST",
              url: 'http://localhost:5000/updatefeatures',
              data: { 'features' : $scope.selected } /*features*/
              /*data: { 'message' : $scope.title }*/

          }).then(function(response) {
                      //success
                      console.log("success");
              }, 
              function(error) { // optional
                      // failed
                      console.log("failed");
              });

          }

           $scope.updateFeatures1 = function() {
            $http({
              method: "POST",
              url: 'http://localhost:5000/updatefeatures1',
              data: { 'features1' : $scope.selected1 } /*features*/
              /*data: { 'message' : $scope.title }*/

          }).then(function(response) {
                      //success
                      console.log("success");
              }, 
              function(error) { // optional
                      // failed
                      console.log("failed");
              });

          }


        $scope.myFunc = function()
          {
      
              console.log("checking here");
              $scope.title = document.getElementById("modelValue").value;
              /*console.log(e);*/
              /*$scope.title = algorithm*/
                $http({
                  url: 'http://127.0.0.1:5000/value',
                  method: "POST",
                  data: { 'algorithm' : $scope.title }
              })
              .then(function(response) {
                      
                      console.log("success");
              }, 
              function(response) { 
                      
                      console.log("failed");
              });
          };

          $scope.myFunc1 = function()
          {
      
              console.log("checking here");
              $scope.title1 = document.getElementById("modelValue1").value;
              /*console.log(e);*/
              /*$scope.title1 = model*/
                $http({
                  url: 'http://127.0.0.1:5000/value1',
                  method: "POST",
                  data: { 'model' : $scope.title1 }
              })
              .then(function(response) {
                      
                      console.log("success");
              }, 
              function(response) { 
                      
                      console.log("failed");
              });
          };

          $scope.submitAllFeatures = function()
          {
                console.log("checking here for submit al features");
                alert("Hello");
                 $scope.title1 = document.getElementById("modelValue1").value;
          $scope.title = document.getElementById("modelValue").value;

                console.log("submit all features")
                $http({
                  url: 'http://127.0.0.1:5000/submittedfeatures',
                  method: "POST",
                  data: { 'features' : $scope.selected,'features1' : $scope.selected1, 'algorithm' : $scope.title, 'model': $scope.title1  }
              })
              .then(function(response) {
                      
                      console.log("success");
              }, 
              function(response) { 
                      
                      console.log("failed");
              });
          };

    });

    
/*'features' : $scope.selected,'features1' : $scope.selected1, 'algorithm' : $scope.title,*/

forestCovertype.directive('file', function () {
    return {
        scope: {
            file: '='
        },
        link: function (scope, el, attrs) {
            el.bind('change', function (event) {
                var file = event.target.files[0];
                scope.file = file ? file : undefined;
                scope.$apply();
            });
        }
    };
});
</script>

</body>

</html>



 <!--  <li>
                    <a href="#results">Results</a>
                </li>
                <li>
                    <a href="#graphs">Graphs</a>
                </li> -->

<!-- 
.when("/preProcessing", {
            templateUrl: "../angular/preProcessing.html"
        }).when("/featureSelection", {
            templateUrl: "../angular/featureSelection.html"
        }) -->


<!-- <li>
                    <a href="#preProcessing">Preprocessing</a>
                </li>
                <li>
                    <a href="#featureSelection">Feature Selection</a>
                </li> -->



               <!--   forestCovertype.controller("preprocessingCtrl", function ($scope, $http) 
    {

    }); -->